"use strict";(self.webpackChunkreact_fastapi_auth_app=self.webpackChunkreact_fastapi_auth_app||[]).push([[192],{2192:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=n(675),a=n(467),s=n(5544),o=n(5043),i=n(3216),c=n(4117),l=n(7027),u=n(8816),p=n(579),d=function(e){var t=e.setToken,n=(0,o.useState)(""),d=(0,s.A)(n,2),m=d[0],h=d[1],f=(0,o.useState)(""),g=(0,s.A)(f,2),b=g[0],w=g[1],v=(0,i.Zp)(),x=(0,c.Bd)().t;(0,o.useEffect)((function(){localStorage.getItem("token")&&v("/admin/home")}),[v]);var j=function(){var e=(0,a.A)((0,r.A)().mark((function e(n){var a,s,o,i;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,(0,u.iD)({username:m,password:b});case 4:a=e.sent,s=a.access_token,t(s),localStorage.setItem("token",s),v("/admin/home"),l.oR.success("\u0423\u0441\u043f\u0435\u0448\u043d\u044b\u0439 \u0432\u0445\u043e\u0434"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430",e.t0),l.oR.error((null===(o=e.t0.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.detail)||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)("main",{className:"d-flex align-items-center py-4 bg-body-tertiary vh-100",children:(0,p.jsx)("div",{className:"form-signin w-100 m-auto text-center",children:(0,p.jsxs)("form",{onSubmit:j,children:[(0,p.jsx)("img",{className:"mb-4",src:"https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-logo-shadow.png",alt:"logo",width:"72",height:"57"}),(0,p.jsx)("h1",{className:"h3 mb-3 fw-normal",children:x("please_sign_in")}),(0,p.jsxs)("div",{className:"form-floating mb-2",children:[(0,p.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:m,onChange:function(e){return h(e.target.value)},required:!0}),(0,p.jsx)("label",{htmlFor:"floatingInput",children:x("username")})]}),(0,p.jsxs)("div",{className:"form-floating mb-3",children:[(0,p.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:b,onChange:function(e){return w(e.target.value)},required:!0}),(0,p.jsx)("label",{htmlFor:"floatingPassword",children:x("password")})]}),(0,p.jsx)("button",{className:"btn btn-primary w-100 py-2 mb-2",type:"submit",children:x("sign_in")}),(0,p.jsxs)("button",{className:"btn btn-outline-secondary w-100 py-2 mb-3",type:"button",children:[(0,p.jsx)("svg",{className:"bi me-1",width:"16",height:"16",children:(0,p.jsx)("use",{xlinkHref:"#twitter"})}),x("sign_in_with_twitter")]}),(0,p.jsx)("p",{className:"mt-5 mb-3 text-body-secondary",children:"\xa9 2024"})]})})})}},4505:function(e,t,n){var r=n(9722).A.create({baseURL:"http://localhost:8001",headers:{"Content-Type":"application/json"}});r.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),t.A=r},8816:function(e,t,n){n.d(t,{iD:function(){return o},ri:function(){return i}});var r=n(675),a=n(467),s=n(4505),o=function(){var e=(0,a.A)((0,r.A)().mark((function e(t){var n,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("username",t.username),n.append("password",t.password),e.next=5,s.A.post("/auth/login",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){localStorage.removeItem("token"),window.location.href="/login"}}}]);
//# sourceMappingURL=192.784053d8.chunk.js.map